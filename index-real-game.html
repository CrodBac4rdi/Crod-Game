<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevSim - The Real Grind</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        
        :root {
            --bg: #0a0a0a;
            --surface: #141414;
            --surface-hover: #1a1a1a;
            --border: #2a2a2a;
            --text: #e0e0e0;
            --text-dim: #606060;
            --primary: #00ff88;
            --secondary: #ff0088;
            --warning: #ffaa00;
            --error: #ff3333;
            --success: #00ff88;
            --xp: #00aaff;
        }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            overflow: hidden;
        }
        
        /* Game Container */
        .game-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        /* Top Bar */
        .top-bar {
            background: var(--surface);
            border-bottom: 2px solid var(--primary);
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .resources {
            display: flex;
            gap: 2rem;
        }
        
        .resource {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .resource-icon {
            font-size: 20px;
        }
        
        .resource-value {
            font-weight: 600;
            font-size: 18px;
            min-width: 80px;
        }
        
        .money { color: var(--success); }
        .energy { color: var(--warning); }
        .stress { color: var(--error); }
        .xp { color: var(--xp); }
        
        /* Game Area */
        .game-area {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 1px;
            background: var(--border);
            overflow: hidden;
        }
        
        .panel {
            background: var(--surface);
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .panel-header {
            background: var(--bg);
            padding: 0.75rem 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 12px;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        /* Skills & Upgrades */
        .skill-tree {
            padding: 1rem;
        }
        
        .skill-item {
            background: var(--bg);
            border: 1px solid var(--border);
            padding: 0.75rem;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .skill-item:hover {
            border-color: var(--primary);
            transform: translateX(4px);
        }
        
        .skill-item.maxed {
            border-color: var(--success);
            opacity: 0.7;
        }
        
        .skill-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .skill-name {
            font-weight: 600;
            color: var(--primary);
        }
        
        .skill-level {
            background: var(--surface);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .skill-progress {
            height: 4px;
            background: var(--bg);
            margin: 0.5rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .skill-progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s;
        }
        
        .skill-cost {
            font-size: 11px;
            color: var(--text-dim);
        }
        
        /* Work Area */
        .work-area {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .code-editor {
            flex: 1;
            background: #000;
            padding: 1rem;
            font-family: monospace;
            position: relative;
            overflow: hidden;
        }
        
        .code-display {
            position: relative;
            height: 100%;
        }
        
        .code-line {
            margin: 2px 0;
            transition: all 0.2s;
            opacity: 0.3;
            white-space: pre;
        }
        
        .code-line.active {
            color: var(--primary);
            opacity: 1;
            text-shadow: 0 0 10px var(--primary);
            animation: typewriter 0.2s steps(40);
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        .code-line.bug {
            color: var(--error);
            text-decoration: underline wavy;
            animation: bugShake 0.5s;
        }
        
        @keyframes bugShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }
        
        /* Action Bar */
        .action-bar {
            background: var(--bg);
            border-top: 1px solid var(--border);
            padding: 1rem;
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }
        
        .action-btn {
            background: var(--surface);
            border: 2px solid var(--border);
            color: var(--text);
            padding: 1rem 2rem;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            text-transform: uppercase;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .action-btn:hover:not(:disabled) {
            border-color: var(--primary);
            transform: scale(1.05);
        }
        
        .action-btn:active:not(:disabled) {
            transform: scale(0.95);
        }
        
        .action-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .action-btn.primary {
            background: var(--primary);
            color: var(--bg);
            border-color: var(--primary);
        }
        
        .action-btn.danger {
            border-color: var(--error);
            color: var(--error);
        }
        
        .btn-cooldown {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: var(--warning);
            transition: width linear;
        }
        
        /* Project Cards */
        .project-list {
            padding: 0.5rem;
        }
        
        .project-card {
            background: var(--bg);
            border: 2px solid var(--border);
            margin: 0.5rem 0;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .project-card:hover {
            border-color: var(--primary);
            transform: translateX(4px);
        }
        
        .project-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .project-card.locked::after {
            content: 'üîí';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
        }
        
        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .project-title {
            font-weight: 600;
        }
        
        .project-reward {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .reward-money {
            color: var(--success);
            font-weight: 600;
        }
        
        .reward-xp {
            color: var(--xp);
            font-size: 12px;
        }
        
        .project-meta {
            display: flex;
            gap: 1rem;
            font-size: 12px;
            color: var(--text-dim);
        }
        
        .difficulty-badge {
            padding: 2px 6px;
            border: 1px solid;
            border-radius: 4px;
        }
        
        .diff-1 { border-color: var(--success); color: var(--success); }
        .diff-2 { border-color: var(--warning); color: var(--warning); }
        .diff-3 { border-color: var(--secondary); color: var(--secondary); }
        .diff-4 { border-color: var(--error); color: var(--error); }
        
        /* Current Project */
        .current-project {
            background: var(--bg);
            border: 2px solid var(--primary);
            margin: 1rem;
            padding: 1rem;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }
        
        .project-progress {
            margin: 1rem 0;
        }
        
        .progress-bar {
            height: 24px;
            background: var(--bg);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
            margin: 0.5rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 600;
            mix-blend-mode: difference;
        }
        
        /* Combo System */
        .combo-display {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--surface);
            border: 2px solid var(--warning);
            padding: 0.5rem 1rem;
            font-size: 24px;
            font-weight: 800;
            color: var(--warning);
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s;
        }
        
        .combo-display.active {
            opacity: 1;
            transform: scale(1);
            animation: comboPulse 0.5s;
        }
        
        @keyframes comboPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* Bug System */
        .bug-list {
            padding: 0.5rem;
        }
        
        .bug-item {
            background: var(--bg);
            border: 2px solid var(--error);
            padding: 0.5rem;
            margin: 0.5rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: bugPulse 2s infinite;
        }
        
        @keyframes bugPulse {
            0%, 100% { border-color: var(--error); }
            50% { border-color: var(--warning); }
        }
        
        /* Notifications */
        .notification-container {
            position: fixed;
            top: 4rem;
            right: 1rem;
            z-index: 100;
        }
        
        .notification {
            background: var(--surface);
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 0.5rem 0;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification.success { border-color: var(--success); }
        .notification.error { border-color: var(--error); }
        .notification.warning { border-color: var(--warning); }
        .notification.xp { border-color: var(--xp); }
        
        /* Achievements */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--surface);
            border: 2px solid var(--success);
            padding: 2rem;
            text-align: center;
            z-index: 200;
            animation: achievementPop 0.5s ease-out;
        }
        
        @keyframes achievementPop {
            from { transform: translate(-50%, -50%) scale(0); }
            to { transform: translate(-50%, -50%) scale(1); }
        }
        
        .achievement-icon {
            font-size: 48px;
            margin-bottom: 1rem;
        }
        
        /* Store Items */
        .store-item {
            background: var(--bg);
            border: 1px solid var(--border);
            padding: 0.75rem;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .store-item:hover {
            border-color: var(--primary);
        }
        
        .store-item.purchased {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Energy Warning */
        .energy-warning {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 51, 51, 0.9);
            padding: 2rem;
            border: 2px solid var(--error);
            display: none;
            z-index: 300;
            animation: warningFlash 0.5s infinite;
        }
        
        @keyframes warningFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Sound Toggle */
        .sound-toggle {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            background: var(--surface);
            border: 2px solid var(--border);
            padding: 0.5rem;
            cursor: pointer;
            font-size: 20px;
        }
        
        .sound-toggle:hover {
            border-color: var(--primary);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script>
        const { useState, useEffect, useCallback, useRef } = React;
        const { createRoot } = ReactDOM;
        
        // Sound System
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioContext = null;
        
        function initAudio() {
            if (!audioContext) {
                audioContext = new AudioContext();
            }
        }
        
        function playSound(type) {
            if (!audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'click':
                    oscillator.frequency.value = 800;
                    gainNode.gain.value = 0.1;
                    break;
                case 'code':
                    oscillator.frequency.value = 600 + Math.random() * 400;
                    gainNode.gain.value = 0.05;
                    break;
                case 'bug':
                    oscillator.frequency.value = 200;
                    gainNode.gain.value = 0.2;
                    break;
                case 'success':
                    oscillator.frequency.value = 1000;
                    gainNode.gain.value = 0.15;
                    break;
                case 'levelup':
                    oscillator.frequency.value = 1200;
                    gainNode.gain.value = 0.3;
                    break;
            }
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.1);
        }
        
        // THE REAL GAME
        function DevSimRealGame() {
            // Game State
            const [gameState, setGameState] = useState({
                // Resources
                money: 0,
                energy: 100,
                maxEnergy: 100,
                stress: 0,
                experience: 0,
                level: 1,
                totalXP: 0,
                
                // Stats
                linesOfCode: 0,
                bugsFixed: 0,
                projectsCompleted: 0,
                perfectProjects: 0,
                currentCombo: 0,
                maxCombo: 0,
                
                // Skills
                skills: {
                    typing: { level: 1, xp: 0, name: 'Typing Speed' },
                    debugging: { level: 0, xp: 0, name: 'Debugging' },
                    architecture: { level: 0, xp: 0, name: 'Architecture' },
                    optimization: { level: 0, xp: 0, name: 'Optimization' },
                    coffee: { level: 0, xp: 0, name: 'Coffee Tolerance' }
                },
                
                // Upgrades
                upgrades: {
                    keyboard: 0,
                    monitor: 0,
                    chair: 0,
                    coffee: 0,
                    ide: 0
                },
                
                // Unlocks
                unlocked: {
                    debugging: false,
                    store: false,
                    automation: false,
                    multiplayer: false
                },
                
                // Settings
                soundEnabled: true,
                autoSave: true
            });
            
            const [currentProject, setCurrentProject] = useState(null);
            const [availableProjects, setAvailableProjects] = useState([]);
            const [activeCode, setActiveCode] = useState([]);
            const [bugs, setBugs] = useState([]);
            const [notifications, setNotifications] = useState([]);
            const [achievements, setAchievements] = useState([]);
            const [combo, setCombo] = useState(0);
            const [isCoding, setIsCoding] = useState(false);
            const [isDebugging, setIsDebugging] = useState(false);
            
            // Refs
            const comboTimeout = useRef(null);
            const codeInterval = useRef(null);
            const saveInterval = useRef(null);
            const energyDrain = useRef(null);
            
            // Constants
            const ACHIEVEMENTS = [
                { id: 'first_line', name: 'Hello World', desc: 'Write your first line of code', icon: 'üë∂', xp: 10 },
                { id: 'first_project', name: 'First Steps', desc: 'Complete your first project', icon: 'üéØ', xp: 50 },
                { id: 'bug_hunter', name: 'Bug Hunter', desc: 'Fix 100 bugs', icon: 'üêõ', xp: 100 },
                { id: 'combo_10', name: 'On Fire', desc: 'Reach 10x combo', icon: 'üî•', xp: 75 },
                { id: 'millionaire', name: 'Tech Millionaire', desc: 'Earn $1,000,000', icon: 'üí∞', xp: 500 },
                { id: 'no_stress', name: 'Zen Master', desc: 'Complete project with 0 stress', icon: 'üßò', xp: 200 }
            ];
            
            // Initialize
            useEffect(() => {
                initAudio();
                loadGame();
                generateProjects();
                
                // Energy drain
                energyDrain.current = setInterval(() => {
                    setGameState(prev => {
                        if (!currentProject) return prev;
                        
                        const newEnergy = Math.max(0, prev.energy - 0.5);
                        if (newEnergy === 0 && currentProject) {
                            failProject();
                            notify('üíÄ Passed out from exhaustion!', 'error');
                        }
                        return { ...prev, energy: newEnergy };
                    });
                }, 1000);
                
                // Auto save
                saveInterval.current = setInterval(() => {
                    if (gameState.autoSave) saveGame();
                }, 30000);
                
                return () => {
                    clearInterval(energyDrain.current);
                    clearInterval(saveInterval.current);
                    clearInterval(codeInterval.current);
                };
            }, []);
            
            // Save/Load
            function saveGame() {
                localStorage.setItem('devSimSave', JSON.stringify({
                    gameState,
                    achievements,
                    timestamp: Date.now()
                }));
            }
            
            function loadGame() {
                const save = localStorage.getItem('devSimSave');
                if (save) {
                    const data = JSON.parse(save);
                    setGameState(data.gameState);
                    setAchievements(data.achievements || []);
                }
            }
            
            // Generate Projects
            function generateProjects() {
                const level = gameState.level;
                const projects = [];
                
                // Tutorial project
                if (gameState.projectsCompleted === 0) {
                    projects.push({
                        id: 'tutorial',
                        name: 'Fix Typo',
                        client: 'Tutorial',
                        reward: 10,
                        xp: 10,
                        difficulty: 1,
                        lines: 5,
                        deadline: 60,
                        bugs: 0,
                        requirements: { typing: 1 }
                    });
                }
                
                // Regular projects
                const projectTypes = [
                    { name: 'Landing Page', lines: 20, reward: 50, diff: 1 },
                    { name: 'Contact Form', lines: 40, reward: 100, diff: 1 },
                    { name: 'Blog System', lines: 80, reward: 250, diff: 2 },
                    { name: 'E-Commerce', lines: 150, reward: 500, diff: 3 },
                    { name: 'Mobile App', lines: 200, reward: 1000, diff: 4 }
                ];
                
                projectTypes.forEach((type, i) => {
                    if (level >= type.diff) {
                        projects.push({
                            id: Date.now() + i,
                            name: type.name,
                            client: `Client ${Math.floor(Math.random() * 100)}`,
                            reward: Math.floor(type.reward * (1 + level * 0.1)),
                            xp: type.diff * 20,
                            difficulty: type.diff,
                            lines: type.lines,
                            deadline: type.lines * 2,
                            bugs: Math.floor(Math.random() * type.diff * 2),
                            requirements: {
                                typing: type.diff,
                                debugging: type.diff > 1 ? type.diff - 1 : 0
                            }
                        });
                    }
                });
                
                setAvailableProjects(projects);
            }
            
            // Start Project
            function startProject(project) {
                // Check requirements
                for (const [skill, req] of Object.entries(project.requirements)) {
                    if (gameState.skills[skill].level < req) {
                        notify(`Need ${skill} level ${req}!`, 'error');
                        return;
                    }
                }
                
                if (gameState.energy < 20) {
                    notify('Too tired! Need at least 20 energy.', 'error');
                    return;
                }
                
                setCurrentProject({
                    ...project,
                    linesWritten: 0,
                    bugsFixed: 0,
                    timeLeft: project.deadline,
                    quality: 100
                });
                
                generateCode(project.lines);
                notify(`Started: ${project.name}`, 'success');
                
                // Deadline timer
                const timer = setInterval(() => {
                    setCurrentProject(prev => {
                        if (!prev) {
                            clearInterval(timer);
                            return null;
                        }
                        
                        const newTime = prev.timeLeft - 1;
                        if (newTime <= 0) {
                            clearInterval(timer);
                            failProject();
                            return null;
                        }
                        
                        return { ...prev, timeLeft: newTime };
                    });
                }, 1000);
            }
            
            // Generate Code Display
            function generateCode(lines) {
                const codeTemplates = [
                    'const data = await fetch(api);',
                    'if (user.isAuthenticated) {',
                    '  return <Dashboard user={user} />;',
                    '} else {',
                    '  return <Login />;',
                    '}',
                    'function processData(input) {',
                    '  return input.map(transform);',
                    '}',
                    'const result = calculate(params);'
                ];
                
                const code = [];
                for (let i = 0; i < lines; i++) {
                    code.push({
                        text: codeTemplates[i % codeTemplates.length],
                        written: false,
                        hasBug: Math.random() < 0.1
                    });
                }
                
                setActiveCode(code);
            }
            
            // MAIN GAME MECHANIC - Write Code
            function writeCode() {
                if (!currentProject || isCoding) return;
                
                const energyCost = 2;
                if (gameState.energy < energyCost) {
                    notify('Not enough energy!', 'error');
                    return;
                }
                
                setIsCoding(true);
                playSound('click');
                
                // Start typing animation
                const typingSpeed = 200 - (gameState.skills.typing.level * 10);
                const linesPerClick = gameState.skills.typing.level;
                
                let typed = 0;
                codeInterval.current = setInterval(() => {
                    if (typed >= linesPerClick) {
                        clearInterval(codeInterval.current);
                        setIsCoding(false);
                        return;
                    }
                    
                    setCurrentProject(prev => {
                        if (!prev || prev.linesWritten >= prev.lines) return prev;
                        
                        const nextLine = prev.linesWritten;
                        setActiveCode(code => {
                            const updated = [...code];
                            if (updated[nextLine]) {
                                updated[nextLine].written = true;
                                playSound('code');
                                
                                // Check for bug
                                if (updated[nextLine].hasBug) {
                                    generateBug();
                                }
                            }
                            return updated;
                        });
                        
                        return { ...prev, linesWritten: prev.linesWritten + 1 };
                    });
                    
                    // Update stats
                    setGameState(prev => ({
                        ...prev,
                        energy: Math.max(0, prev.energy - energyCost / linesPerClick),
                        stress: Math.min(100, prev.stress + 1),
                        linesOfCode: prev.linesOfCode + 1,
                        skills: {
                            ...prev.skills,
                            typing: {
                                ...prev.skills.typing,
                                xp: prev.skills.typing.xp + 1
                            }
                        }
                    }));
                    
                    typed++;
                    updateCombo();
                    
                }, typingSpeed);
            }
            
            // Generate Bug
            function generateBug() {
                const bugTypes = [
                    { name: 'Null Pointer', severity: 1, fix: 'Check null values' },
                    { name: 'Type Error', severity: 2, fix: 'Fix type mismatch' },
                    { name: 'Memory Leak', severity: 3, fix: 'Clean up resources' },
                    { name: 'Race Condition', severity: 4, fix: 'Add proper locking' }
                ];
                
                const bug = bugTypes[Math.floor(Math.random() * bugTypes.length)];
                
                setBugs(prev => [...prev, {
                    id: Date.now(),
                    ...bug,
                    timeToFix: bug.severity * 3
                }]);
                
                setCurrentProject(prev => ({
                    ...prev,
                    quality: Math.max(0, prev.quality - bug.severity * 5)
                }));
                
                playSound('bug');
                notify(`üêõ BUG: ${bug.name}`, 'error');
            }
            
            // Fix Bug
            function fixBug(bugId) {
                if (!gameState.unlocked.debugging) {
                    notify('Debugging not unlocked!', 'error');
                    return;
                }
                
                if (isDebugging) return;
                
                const bug = bugs.find(b => b.id === bugId);
                if (!bug) return;
                
                setIsDebugging(true);
                
                // Debugging minigame would go here
                setTimeout(() => {
                    setBugs(prev => prev.filter(b => b.id !== bugId));
                    setCurrentProject(prev => ({
                        ...prev,
                        bugsFixed: prev.bugsFixed + 1,
                        quality: Math.min(100, prev.quality + 10)
                    }));
                    
                    setGameState(prev => ({
                        ...prev,
                        bugsFixed: prev.bugsFixed + 1,
                        experience: prev.experience + bug.severity * 10,
                        skills: {
                            ...prev.skills,
                            debugging: {
                                ...prev.skills.debugging,
                                xp: prev.skills.debugging.xp + bug.severity * 5
                            }
                        }
                    }));
                    
                    playSound('success');
                    notify(`‚úÖ Fixed: ${bug.name}`, 'success');
                    setIsDebugging(false);
                    
                }, bug.timeToFix * 500);
            }
            
            // Submit Project
            function submitProject() {
                if (!currentProject) return;
                
                if (currentProject.linesWritten < currentProject.lines) {
                    notify('Project not complete!', 'error');
                    return;
                }
                
                if (bugs.length > 0) {
                    notify(`Fix all ${bugs.length} bugs first!`, 'error');
                    return;
                }
                
                // Calculate rewards
                const qualityBonus = currentProject.quality / 100;
                const comboBonus = 1 + (combo * 0.1);
                const finalReward = Math.floor(currentProject.reward * qualityBonus * comboBonus);
                const finalXP = Math.floor(currentProject.xp * comboBonus);
                
                // Update game state
                setGameState(prev => {
                    const newState = {
                        ...prev,
                        money: prev.money + finalReward,
                        experience: prev.experience + finalXP,
                        totalXP: prev.totalXP + finalXP,
                        projectsCompleted: prev.projectsCompleted + 1,
                        perfectProjects: currentProject.quality === 100 ? prev.perfectProjects + 1 : prev.perfectProjects,
                        maxCombo: Math.max(prev.maxCombo, combo)
                    };
                    
                    // Check level up
                    const xpNeeded = newState.level * 100;
                    if (newState.experience >= xpNeeded) {
                        newState.level += 1;
                        newState.experience -= xpNeeded;
                        newState.maxEnergy += 10;
                        newState.energy = newState.maxEnergy;
                        
                        // Unlocks
                        if (newState.level === 2) newState.unlocked.debugging = true;
                        if (newState.level === 5) newState.unlocked.store = true;
                        if (newState.level === 10) newState.unlocked.automation = true;
                        
                        showAchievement('LEVEL UP!', `Now level ${newState.level}!`);
                        playSound('levelup');
                    }
                    
                    return newState;
                });
                
                // Check achievements
                checkAchievements();
                
                // Show rewards
                notify(`‚úÖ Project Complete! +$${finalReward} +${finalXP}XP`, 'success');
                
                // Reset
                setCurrentProject(null);
                setActiveCode([]);
                setBugs([]);
                
                // Generate new projects
                setTimeout(generateProjects, 1000);
            }
            
            // Fail Project
            function failProject() {
                notify(`‚ùå Project Failed!`, 'error');
                setGameState(prev => ({
                    ...prev,
                    stress: Math.min(100, prev.stress + 20)
                }));
                setCurrentProject(null);
                setActiveCode([]);
                setBugs([]);
            }
            
            // Combo System
            function updateCombo() {
                setCombo(prev => prev + 1);
                
                clearTimeout(comboTimeout.current);
                comboTimeout.current = setTimeout(() => {
                    setCombo(0);
                }, 2000);
            }
            
            // Rest
            function rest() {
                if (currentProject) {
                    notify('Cannot rest during project!', 'error');
                    return;
                }
                
                const cost = 10 + gameState.level * 5;
                if (gameState.money < cost) {
                    notify(`Need $${cost} for coffee!`, 'error');
                    return;
                }
                
                setGameState(prev => ({
                    ...prev,
                    money: prev.money - cost,
                    energy: Math.min(prev.maxEnergy, prev.energy + 50),
                    stress: Math.max(0, prev.stress - 20)
                }));
                
                notify('‚òï Recharged with coffee!', 'success');
            }
            
            // Upgrade Skill
            function upgradeSkill(skillName) {
                const skill = gameState.skills[skillName];
                const cost = (skill.level + 1) * 100;
                const xpNeeded = skill.level * 50;
                
                if (gameState.money < cost) {
                    notify(`Need $${cost}!`, 'error');
                    return;
                }
                
                if (skill.xp < xpNeeded) {
                    notify(`Need ${xpNeeded} ${skillName} XP!`, 'error');
                    return;
                }
                
                setGameState(prev => ({
                    ...prev,
                    money: prev.money - cost,
                    skills: {
                        ...prev.skills,
                        [skillName]: {
                            ...skill,
                            level: skill.level + 1,
                            xp: skill.xp - xpNeeded
                        }
                    }
                }));
                
                notify(`üìà ${skill.name} upgraded to level ${skill.level + 1}!`, 'success');
            }
            
            // Check Achievements
            function checkAchievements() {
                ACHIEVEMENTS.forEach(ach => {
                    if (achievements.some(a => a.id === ach.id)) return;
                    
                    let earned = false;
                    
                    switch(ach.id) {
                        case 'first_line':
                            earned = gameState.linesOfCode > 0;
                            break;
                        case 'first_project':
                            earned = gameState.projectsCompleted > 0;
                            break;
                        case 'bug_hunter':
                            earned = gameState.bugsFixed >= 100;
                            break;
                        case 'combo_10':
                            earned = gameState.maxCombo >= 10;
                            break;
                        case 'millionaire':
                            earned = gameState.money >= 1000000;
                            break;
                        case 'no_stress':
                            earned = gameState.perfectProjects > 0 && gameState.stress === 0;
                            break;
                    }
                    
                    if (earned) {
                        setAchievements(prev => [...prev, ach]);
                        showAchievement(ach.name, ach.desc);
                        setGameState(prev => ({
                            ...prev,
                            experience: prev.experience + ach.xp
                        }));
                    }
                });
            }
            
            // Show Achievement
            function showAchievement(title, desc) {
                const popup = document.createElement('div');
                popup.className = 'achievement-popup';
                popup.innerHTML = `
                    <div class="achievement-icon">üèÜ</div>
                    <h3>${title}</h3>
                    <p>${desc}</p>
                `;
                document.body.appendChild(popup);
                
                setTimeout(() => popup.remove(), 3000);
            }
            
            // Notifications
            function notify(message, type = 'info') {
                const notif = {
                    id: Date.now(),
                    message,
                    type
                };
                
                setNotifications(prev => [...prev.slice(-4), notif]);
                
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== notif.id));
                }, 3000);
            }
            
            // RENDER
            return React.createElement('div', { className: 'game-container' },
                // Top Bar
                React.createElement('div', { className: 'top-bar' },
                    React.createElement('div', { className: 'resources' },
                        React.createElement('div', { className: 'resource' },
                            React.createElement('span', { className: 'resource-icon' }, 'üí∞'),
                            React.createElement('span', { className: 'resource-value money' }, 
                                `$${gameState.money}`
                            )
                        ),
                        React.createElement('div', { className: 'resource' },
                            React.createElement('span', { className: 'resource-icon' }, '‚ö°'),
                            React.createElement('span', { className: 'resource-value energy' }, 
                                `${Math.floor(gameState.energy)}/${gameState.maxEnergy}`
                            )
                        ),
                        React.createElement('div', { className: 'resource' },
                            React.createElement('span', { className: 'resource-icon' }, 'üò∞'),
                            React.createElement('span', { className: 'resource-value stress' }, 
                                `${Math.floor(gameState.stress)}%`
                            )
                        ),
                        React.createElement('div', { className: 'resource' },
                            React.createElement('span', { className: 'resource-icon' }, '‚ú®'),
                            React.createElement('span', { className: 'resource-value xp' }, 
                                `${gameState.experience}/${gameState.level * 100} XP`
                            )
                        )
                    ),
                    React.createElement('div', null,
                        React.createElement('span', { style: { marginRight: '1rem' } }, 
                            `Level ${gameState.level} Developer`
                        ),
                        combo > 0 && React.createElement('span', { 
                            className: 'combo-display active' 
                        }, `${combo}x COMBO!`)
                    )
                ),
                
                // Game Area
                React.createElement('div', { className: 'game-area' },
                    // Left Panel - Skills & Store
                    React.createElement('div', { className: 'panel' },
                        React.createElement('div', { className: 'panel-header' }, 'SKILLS'),
                        React.createElement('div', { className: 'skill-tree' },
                            Object.entries(gameState.skills).map(([key, skill]) =>
                                skill.level > 0 || gameState.unlocked[key] !== false ?
                                React.createElement('div', {
                                    key,
                                    className: `skill-item ${skill.level >= 10 ? 'maxed' : ''}`,
                                    onClick: () => upgradeSkill(key)
                                },
                                    React.createElement('div', { className: 'skill-header' },
                                        React.createElement('div', { className: 'skill-name' }, 
                                            skill.name
                                        ),
                                        React.createElement('div', { className: 'skill-level' }, 
                                            `Lv ${skill.level}`
                                        )
                                    ),
                                    React.createElement('div', { className: 'skill-progress' },
                                        React.createElement('div', {
                                            className: 'skill-progress-fill',
                                            style: { 
                                                width: `${(skill.xp / (skill.level * 50)) * 100}%` 
                                            }
                                        })
                                    ),
                                    React.createElement('div', { className: 'skill-cost' },
                                        skill.level < 10 ? 
                                        `Upgrade: $${(skill.level + 1) * 100} | ${skill.xp}/${skill.level * 50} XP` :
                                        'MAX LEVEL'
                                    )
                                ) : null
                            )
                        ),
                        
                        gameState.unlocked.store && React.createElement('div', null,
                            React.createElement('div', { 
                                className: 'panel-header',
                                style: { marginTop: '2rem' }
                            }, 'UPGRADES'),
                            React.createElement('div', { style: { padding: '1rem' } },
                                React.createElement('div', { className: 'store-item' },
                                    React.createElement('div', null, '‚å®Ô∏è Mechanical Keyboard'),
                                    React.createElement('div', null, '$500 - +2 typing speed')
                                ),
                                React.createElement('div', { className: 'store-item' },
                                    React.createElement('div', null, 'üñ•Ô∏è 4K Monitor'),
                                    React.createElement('div', null, '$1000 - See bugs easier')
                                ),
                                React.createElement('div', { className: 'store-item' },
                                    React.createElement('div', null, '‚òï Coffee Machine'),
                                    React.createElement('div', null, '$2000 - Better rest')
                                )
                            )
                        )
                    ),
                    
                    // Center - Work Area
                    React.createElement('div', { className: 'panel work-area' },
                        currentProject ? React.createElement('div', null,
                            // Current Project
                            React.createElement('div', { className: 'current-project' },
                                React.createElement('h3', null, 
                                    `${currentProject.name} - ${currentProject.client}`
                                ),
                                React.createElement('div', { className: 'project-meta' },
                                    React.createElement('span', null, 
                                        `‚è±Ô∏è ${currentProject.timeLeft}s`
                                    ),
                                    React.createElement('span', null, 
                                        `üí∞ $${currentProject.reward}`
                                    ),
                                    React.createElement('span', null, 
                                        `‚ú® ${currentProject.xp} XP`
                                    )
                                ),
                                
                                // Progress Bars
                                React.createElement('div', { className: 'project-progress' },
                                    React.createElement('div', { className: 'progress-bar' },
                                        React.createElement('div', {
                                            className: 'progress-fill',
                                            style: { 
                                                width: `${(currentProject.linesWritten / currentProject.lines) * 100}%` 
                                            }
                                        }),
                                        React.createElement('div', { className: 'progress-text' },
                                            `${currentProject.linesWritten}/${currentProject.lines} lines`
                                        )
                                    ),
                                    React.createElement('div', { className: 'progress-bar' },
                                        React.createElement('div', {
                                            className: 'progress-fill',
                                            style: { 
                                                width: `${currentProject.quality}%`,
                                                background: currentProject.quality > 80 ? 'var(--success)' :
                                                           currentProject.quality > 50 ? 'var(--warning)' : 'var(--error)'
                                            }
                                        }),
                                        React.createElement('div', { className: 'progress-text' },
                                            `Quality: ${currentProject.quality}%`
                                        )
                                    )
                                )
                            ),
                            
                            // Code Editor
                            React.createElement('div', { className: 'code-editor' },
                                React.createElement('div', { className: 'code-display' },
                                    activeCode.map((line, i) =>
                                        React.createElement('div', {
                                            key: i,
                                            className: `code-line ${line.written ? 'active' : ''} ${line.hasBug && line.written ? 'bug' : ''}`
                                        }, `${i + 1}. ${line.text}`)
                                    )
                                )
                            )
                        ) : React.createElement('div', { 
                            style: { 
                                display: 'flex',
                                flexDirection: 'column',
                                alignItems: 'center',
                                justifyContent: 'center',
                                height: '100%',
                                textAlign: 'center'
                            }
                        },
                            React.createElement('h2', null, 'NO ACTIVE PROJECT'),
                            React.createElement('p', { style: { color: 'var(--text-dim)' } }, 
                                'Select a project from the right panel'
                            ),
                            React.createElement('button', {
                                className: 'action-btn',
                                onClick: rest,
                                disabled: gameState.money < (10 + gameState.level * 5),
                                style: { marginTop: '2rem' }
                            }, `‚òï REST ($${10 + gameState.level * 5})`)
                        ),
                        
                        // Action Bar
                        currentProject && React.createElement('div', { className: 'action-bar' },
                            React.createElement('button', {
                                className: 'action-btn primary',
                                onClick: writeCode,
                                disabled: isCoding || 
                                         currentProject.linesWritten >= currentProject.lines ||
                                         gameState.energy < 2
                            }, 
                                isCoding ? 'TYPING...' : 
                                `WRITE CODE (${gameState.skills.typing.level} lines)`,
                                isCoding && React.createElement('div', {
                                    className: 'btn-cooldown',
                                    style: { 
                                        width: '100%',
                                        transition: `width ${200 - (gameState.skills.typing.level * 10)}ms linear`
                                    }
                                })
                            ),
                            
                            React.createElement('button', {
                                className: 'action-btn',
                                onClick: submitProject,
                                disabled: currentProject.linesWritten < currentProject.lines ||
                                         bugs.length > 0
                            }, 'SUBMIT PROJECT'),
                            
                            React.createElement('button', {
                                className: 'action-btn danger',
                                onClick: () => {
                                    setCurrentProject(null);
                                    setActiveCode([]);
                                    setBugs([]);
                                    notify('Project cancelled', 'warning');
                                }
                            }, 'CANCEL')
                        )
                    ),
                    
                    // Right Panel - Projects & Bugs
                    React.createElement('div', { className: 'panel' },
                        bugs.length > 0 ? React.createElement('div', null,
                            React.createElement('div', { className: 'panel-header' }, 
                                `BUGS (${bugs.length})`
                            ),
                            React.createElement('div', { className: 'bug-list' },
                                bugs.map(bug =>
                                    React.createElement('div', {
                                        key: bug.id,
                                        className: 'bug-item'
                                    },
                                        React.createElement('div', null,
                                            React.createElement('div', { 
                                                style: { fontWeight: 600 } 
                                            }, bug.name),
                                            React.createElement('div', { 
                                                style: { fontSize: '11px', color: 'var(--text-dim)' }
                                            }, bug.fix)
                                        ),
                                        React.createElement('button', {
                                            className: 'action-btn danger',
                                            onClick: () => fixBug(bug.id),
                                            disabled: !gameState.unlocked.debugging || isDebugging,
                                            style: { padding: '0.5rem 1rem' }
                                        }, isDebugging ? '...' : 'FIX')
                                    )
                                )
                            )
                        ) : React.createElement('div', null,
                            React.createElement('div', { className: 'panel-header' }, 
                                'AVAILABLE PROJECTS'
                            ),
                            React.createElement('div', { className: 'project-list' },
                                availableProjects.map(project => {
                                    const canStart = Object.entries(project.requirements).every(
                                        ([skill, req]) => gameState.skills[skill].level >= req
                                    );
                                    
                                    return React.createElement('div', {
                                        key: project.id,
                                        className: `project-card ${!canStart ? 'locked' : ''}`,
                                        onClick: () => canStart && !currentProject && startProject(project)
                                    },
                                        React.createElement('div', { className: 'project-header' },
                                            React.createElement('div', { className: 'project-title' }, 
                                                project.name
                                            ),
                                            React.createElement('div', { className: 'project-reward' },
                                                React.createElement('span', { className: 'reward-money' }, 
                                                    `$${project.reward}`
                                                ),
                                                React.createElement('span', { className: 'reward-xp' }, 
                                                    `+${project.xp}XP`
                                                )
                                            )
                                        ),
                                        React.createElement('div', { className: 'project-meta' },
                                            React.createElement('span', { 
                                                className: `difficulty-badge diff-${project.difficulty}` 
                                            }, `Lv${project.difficulty}`),
                                            React.createElement('span', null, 
                                                `${project.lines} lines`
                                            ),
                                            React.createElement('span', null, 
                                                `${project.deadline}s`
                                            )
                                        ),
                                        !canStart && React.createElement('div', {
                                            style: { 
                                                fontSize: '11px', 
                                                color: 'var(--error)',
                                                marginTop: '0.5rem'
                                            }
                                        }, 
                                            Object.entries(project.requirements)
                                                .filter(([skill, req]) => gameState.skills[skill].level < req)
                                                .map(([skill, req]) => `Need ${skill} ${req}`)
                                                .join(', ')
                                        )
                                    );
                                })
                            )
                        ),
                        
                        // Achievements
                        React.createElement('div', { style: { marginTop: '2rem' } },
                            React.createElement('div', { className: 'panel-header' }, 
                                `ACHIEVEMENTS (${achievements.length}/${ACHIEVEMENTS.length})`
                            ),
                            React.createElement('div', { style: { padding: '0.5rem' } },
                                achievements.slice(-3).map(ach =>
                                    React.createElement('div', {
                                        key: ach.id,
                                        style: { 
                                            padding: '0.5rem',
                                            margin: '0.25rem 0',
                                            background: 'var(--bg)',
                                            border: '1px solid var(--success)'
                                        }
                                    },
                                        React.createElement('span', null, ach.icon),
                                        ' ',
                                        React.createElement('span', null, ach.name)
                                    )
                                )
                            )
                        )
                    )
                ),
                
                // Energy Warning
                gameState.energy < 20 && React.createElement('div', { 
                    className: 'energy-warning',
                    style: { display: 'block' }
                }, 
                    React.createElement('h2', null, '‚ö° LOW ENERGY!'),
                    React.createElement('p', null, 'Rest or you will pass out!')
                ),
                
                // Notifications
                React.createElement('div', { className: 'notification-container' },
                    notifications.map(notif =>
                        React.createElement('div', {
                            key: notif.id,
                            className: `notification ${notif.type}`
                        }, notif.message)
                    )
                ),
                
                // Sound Toggle
                React.createElement('div', {
                    className: 'sound-toggle',
                    onClick: () => {
                        setGameState(prev => ({ 
                            ...prev, 
                            soundEnabled: !prev.soundEnabled 
                        }));
                    }
                }, gameState.soundEnabled ? 'üîä' : 'üîá')
            );
        }
        
        // Initialize
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(DevSimRealGame));
    </script>
</body>
</html>